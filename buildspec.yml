version: 0.2

phases:
        install:
                runtime-versions:
                        nodejs: 12
                commands:
                        - touch .npmignore
                        - npm install -g gatsby
        pre_build:
                commands:
                        - echo pre-build
                        - 'npm install'
        build:
                commands:
                        - echo build
                        - 'npm run build'
        post_build:
                commands:
                        - echo post-build
                        - 'npm run deploy'
artifacts:
        base-directory: public
        files:
                - '**/*'
        discard-paths: no
cache:
        paths:
                - '.cache/*'
                - 'public/*'
